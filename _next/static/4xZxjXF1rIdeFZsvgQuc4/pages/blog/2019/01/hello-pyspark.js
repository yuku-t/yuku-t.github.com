(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{Yp5c:function(a,e,t){"use strict";t.d(e,"a",(function(){return j})),t.d(e,"b",(function(){return P}));var n=t("q1tI"),s=t.n(n),l=t("8Kt/"),c=t.n(l),o=t("YFqc"),p=t.n(o),r=t("nOHt"),i=t("TSYQ"),m=t.n(i),u=t("wd/R"),k=t.n(u),d=t("IP2g"),h=t("he5r"),b=s.a.createElement,N=function(a){return b("aside",{className:m()("widget mb-4",a.className)},b("h1",{className:"title font-weight-bold"},a.title),a.children)},g=t("7O5W"),f=t("wHSu"),y=t("8tEE");g.b.add(f.a,f.b,f.c,y.a,y.b);var v=s.a.createElement,w=function(a){return a||"https://yuku.takahashi.coffee".concat(h.a)},x=Object(r.withRouter)((function(a){return v("div",{className:"blogpage container"},v(c.a,null,v("title",null,a.meta.title," - ",h.c),v("meta",{name:"description",content:a.meta.description}),v("meta",{name:"twitter:card",content:"summary"}),v("meta",{name:"twitter:creator",content:"@yuku_t"}),v("meta",{property:"fb:app_id",content:h.b}),v("meta",{property:"og:title",content:"".concat(a.meta.title," - ").concat(h.c)}),v("meta",{property:"og:type",content:"article"}),v("meta",{property:"og:url",content:"https://yuku.takahashi.coffee".concat(a.router.pathname)}),v("meta",{property:"og:image",content:w()}),v("meta",{property:"og:description",content:a.meta.description}),v("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism.min.css"}),v("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css"})),v("div",{className:"row"},v("main",{className:m()("col-xl-8",a.className)},v("article",{itemScope:!0,itemType:"http://schema.org/BlogPosting"},v("meta",{itemProp:"author",content:"Yuku Takahashi"}),v("meta",{itemProp:"datePublished",content:a.meta.publishedAt}),a.meta.modifiedAt&&v("meta",{itemProp:"dateModified",content:a.meta.modifiedAt}),v("meta",{itemProp:"image",content:w()}),v("header",{className:"mb-4 header"},v("h1",{className:"headline",itemProp:"headline"},a.meta.title),v("ul",{className:"list-inline text-dark font-weight-light"},v("li",{className:"list-inline-item"},v("span",{className:"ml-1"},k()(a.meta.publishedAt).format("YYYY-MM-DD HH:mm"))),v("li",{className:"list-inline-item"},a.meta.tags.map((function(a,e){return[e>0?",":null,v("span",{key:e,className:"ml-1"},"#",a)]}))))),v("section",{className:"mb-4 body",itemProp:"articleBody"},a.children))),v("div",{className:"col-xl-4"},v("div",{className:"pl-xl-2"},v(N,{title:"About Me"},v("div",null,v("img",{src:h.a,alt:"avatar",className:"avatar rounded-circle mb-4 mx-auto d-block"}),v("p",null,"FLYWHEEL Software Engineer, ex-Qiita CTO, and recently I have been working mainly on recommendation systems."," ",v(p.a,{href:"/about"},v("a",{href:"/about"},"Read more")),"."))),v(N,{title:"Follow"},v("ul",{className:"list-inline icons"},v("li",{className:"list-inline-item"},v("a",{href:"https://twitter.com/yuku_t"},v("span",{className:"fa-stack fa-lg"},v(d.a,{icon:"circle",className:"fa-stack-2x"}),v(d.a,{icon:["fab","twitter"],inverse:!0,className:"fa-stack-1x"})))),v("li",{className:"list-inline-item"},v("a",{href:"https://github.com/yuku"},v("span",{className:"fa-stack fa-lg"},v(d.a,{icon:"circle",className:"fa-stack-2x"}),v(d.a,{icon:["fab","github"],inverse:!0,className:"fa-stack-1x"})))),v("li",{className:"list-inline-item"},v("a",{href:"/static/rss-feed.xml"},v("span",{className:"fa-stack fa-lg"},v(d.a,{icon:"circle",className:"fa-stack-2x"}),v(d.a,{icon:"rss",inverse:!0,className:"fa-stack-1x"}))))))))))})),S=s.a.createElement;function j(a){var e=a.meta,t=a.children;return Object(n.useEffect)((function(){if(e.loadTwitterWidget){var a=document.createElement("script");a.async=!0,a.src="https://platform.twitter.com/widgets.js",a.charset="utf-8",document.body.appendChild(a)}}),[]),S(x,{className:"mdx",meta:e},t)}var E=s.a.createElement,P=function(a){return E(x,{className:"notebook",meta:a.meta},a.children)}},aTI2:function(a,e,t){"use strict";t.r(e);var n=t("o0o1"),s=t.n(n),l=t("HaE+"),c=t("q1tI"),o=t.n(c),p=t("Yp5c"),r=o.a.createElement,i=function(){return r("div",{className:"nb-notebook"},r("div",{className:"nb-worksheet"},r("div",{className:"nb-cell nb-markdown-cell"},r("p",null,r("a",{href:"https://spark.apache.org"},"Apatch Spark")," \u306f JVM \u4e0a\u306b\u5b9f\u88c5\u3055\u308c\u305f\u30aa\u30fc\u30d7\u30f3\u30bd\u30fc\u30b9\u306e\u5206\u6563\u51e6\u7406\u30d7\u30ed\u30b0\u30e9\u30df\u30f3\u30b0\u74b0\u5883\u3067\u3001",r("a",{href:"http://fortune.com/2015/09/25/apache-spark-survey/"},"\u8fd1\u5e74\u6025\u901f\u306a\u76db\u308a\u4e0a\u304c\u308a\u3092\u898b\u305b\u3066\u3044\u307e\u3059"),"\u3002 \u4eca\u5f8c ",r("a",{href:"https://spark.apache.org/docs/latest/api/python/index.html"},"pyspark")," \u3092\u901a\u3058\u3066 Spark \u3092\u4f7f\u3046\u4e88\u5b9a\u306a\u306e\u3067\u3001\u8a66\u3057\u306b\u89e6\u3063\u3066\u307f\u305f\u3044\u306e\u3067\u3059\u304c\u3001\u3044\u304b\u3093\u305b\u3093 JVM \u306b\u6163\u308c\u3066\u3044\u306a\u3044\u3053\u3068\u3082\u3042\u3063\u3066 Spark \u306e\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u304b\u3089\u59cb\u3081\u308b\u3068\u5927\u5909\u3067\u3059\u3002"),r("p",null,"\u305d\u3053\u3067\u3053\u306e\u8a18\u4e8b\u3067\u306f Docker \u3092\u4f7f\u3063\u3066 Spark \u3068 pyspark \u306e\u74b0\u5883\u3092\u69cb\u7bc9\u3057\u307e\u3059\u3002"),r("h2",null,"\u74b0\u5883\u3092\u7528\u610f\u3059\u308b"),r("p",null,"Jupyter Lab \u304c\u516c\u958b\u3057\u3066\u3044\u308b ",r("a",{href:"https://hub.docker.com/r/jupyter/pyspark-notebook/"},"jupyter/pyspark-notebook")," \u3068\u3044\u3046\u30ba\u30d0\u30ea\u306a Docker \u30a4\u30e1\u30fc\u30b8\u304c\u3042\u308b\u306e\u3067\u3053\u308c\u3092\u4f7f\u3044\u307e\u3059\u3002\u3055\u3057\u3042\u305f\u308a\u6700\u65b0\u30d0\u30fc\u30b8\u30e7\u30f3\u3092\u3068\u3063\u3066\u304d\u307e\u3057\u305f:"),r("pre",{className:"language-bash"},r("code",{className:"language-bash"},"docker pull jupyter/pyspark-notebook:87210526f381","\n")),r("p",null,"\u8d77\u52d5\u3057\u307e\u3059:"),r("pre",{className:"language-bash"},r("code",{className:"language-bash"},"docker run --rm -w /app -p ",r("span",{className:"token number"},"8888"),":8888 ",r("span",{className:"token punctuation"},"\\"),"\n","    ","--mount ",r("span",{className:"token assign-left variable"},"type"),r("span",{className:"token operator"},"="),"bind,src",r("span",{className:"token operator"},"="),r("span",{className:"token variable"},r("span",{className:"token variable"},"$("),r("span",{className:"token builtin class-name"},"pwd"),r("span",{className:"token variable"},")")),",dst",r("span",{className:"token operator"},"="),"/app ",r("span",{className:"token punctuation"},"\\"),"\n","    ","jupyter/pyspark-notebook:87210526f381","\n")),r("p",null,"\u3059\u308b\u3068\u4f55\u3084\u3089\u30ed\u30b0\u304c\u8868\u793a\u3055\u308c\u308b\u4e2d\u306b URL \u304c\u8868\u793a\u3055\u308c\u308b\u306e\u3067\u3001\u305d\u306e URL \u306b\u30a2\u30af\u30bb\u30b9\u3059\u308c\u3070 pyspark \u304c\u4f7f\u3048\u308b Jupyter Notebook \u304c\u8868\u793a\u3055\u308c\u307e\u3059\u3002\u7c21\u5358\u3067\u3059\u306d\u3002")),r("div",{className:"nb-cell nb-code-cell"},r("div",{className:"nb-input","data-prompt-number":1},r("pre",{className:"language-python"},r("code",{className:"language-python","data-language":"python"},r("span",{className:"token keyword"},"import")," pyspark","\n","pyspark",r("span",{className:"token punctuation"},"."),"version",r("span",{className:"token punctuation"},"."),"__version__"))),r("div",{className:"nb-output","data-prompt-number":1},r("pre",{className:"nb-text-output"},"'2.4.0'"))),r("div",{className:"nb-cell nb-markdown-cell"},r("p",null,"\u3061\u306a\u307f\u306b\u3053\u306e\u8a18\u4e8b\u306f\u307e\u3055\u306b\u3053\u3046\u3057\u3066\u8d77\u52d5\u3057\u305f Jupyter Notebook \u3092\u4f7f\u3063\u3066\u66f8\u304b\u308c\u3066\u3044\u307e\u3059\u3002"),r("h2",null,"Spark \u30af\u30e9\u30b9\u30bf\u3092\u8d77\u52d5\u3059\u308b"),r("p",null,"Spark \u306f\u901a\u5e38\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u3063\u3066\u5206\u6563\u51e6\u7406\u3092\u884c\u3044\u307e\u3059\u304c\u3001\u958b\u767a\u6bb5\u968e\u304b\u3089\u30af\u30e9\u30b9\u30bf\u3092\u4f5c\u308b\u306e\u306f\u5927\u5909\u306a\u306e\u3067 ",r("a",{href:"https://jaceklaskowski.gitbooks.io/mastering-apache-spark/spark-local.html"},"local mode")," \u304c\u7528\u610f\u3055\u308c\u3066\u3044\u307e\u3059\u3002"),r("p",null,"pyspark \u304b\u3089 local mode \u3067 Spark \u3092\u8d77\u52d5\u3059\u308b\u306b\u306f ",r("a",{href:"https://spark.apache.org/docs/latest/api/python/pyspark.html#pyspark.SparkContext"},r("code",null,"pyspark.SparkContext"))," \u3092\u5b9f\u884c\u3057\u307e\u3059:")),r("div",{className:"nb-cell nb-code-cell"},r("div",{className:"nb-input","data-prompt-number":2},r("pre",{className:"language-python"},r("code",{className:"language-python","data-language":"python"},"sc ",r("span",{className:"token operator"},"=")," pyspark",r("span",{className:"token punctuation"},"."),"SparkContext",r("span",{className:"token punctuation"},"("),r("span",{className:"token string"},"'local[*]'"),r("span",{className:"token punctuation"},")"))))),r("div",{className:"nb-cell nb-markdown-cell"},r("p",null,"\u6e21\u3057\u3066\u3044\u308b\u6587\u5b57\u5217\u306f\u5229\u7528\u53ef\u80fd\u30b9\u30ec\u30c3\u30c9\u6570\u3092\u610f\u5473\u3057\u3066\u3044\u3066:"),r("ul",null,r("li",null,r("code",null,"local")," - 1 \u30b9\u30ec\u30c3\u30c9\u306e\u307f\u4f7f\u3046"),r("li",null,r("code",null,"local[n]")," - ",r("code",null,"n")," \u30b9\u30ec\u30c3\u30c9\u4f7f\u3046\uff08",r("code",null,"n")," \u306f\u5b9f\u969b\u306b\u306f\u6570\u5b57\u304c\u5165\u308b\uff09"),r("li",null,r("code",null,"local[*]")," - JVM \u3067\u4f7f\u3048\u308b\u30d7\u30ed\u30bb\u30c3\u30b5\u30fc\u306e\u6570\u3060\u3051\u30b9\u30ec\u30c3\u30c9\u3092\u4f7f\u3046\uff08\u5185\u90e8\u3067\u306f ",r("a",{href:"https://docs.oracle.com/javase/8/docs/api/java/lang/Runtime.html#availableProcessors--"},r("code",null,"Runtime.getRuntime.availableProcessors()"))," \u3092\u4f7f\u3063\u3066\u3044\u308b\u3089\u3057\u3044\uff09")),r("p",null,"\u3068\u3044\u3046\u3053\u3068\u3092\u8868\u3057\u3066\u3044\u307e\u3059\u3002\u4e00\u822c\u7684\u306b\u306f ",r("code",null,"local[*]")," \u304c\u4f7f\u308f\u308c\u308b\u3088\u3046\u3067\u3059\u3002"),r("p",null,"\u8a66\u3057\u306b 0 \u304b\u3089 10 \u307e\u3067\u306e\u6570\u5b57\u306e\u5408\u8a08\u3092\u8a08\u7b97\u3057\u3066\u307f\u307e\u3059\u3002")),r("div",{className:"nb-cell nb-code-cell"},r("div",{className:"nb-input","data-prompt-number":3},r("pre",{className:"language-python"},r("code",{className:"language-python","data-language":"python"},"rdd ",r("span",{className:"token operator"},"=")," sc",r("span",{className:"token punctuation"},"."),"parallelize",r("span",{className:"token punctuation"},"("),r("span",{className:"token builtin"},"range"),r("span",{className:"token punctuation"},"("),r("span",{className:"token number"},"10"),r("span",{className:"token punctuation"},")"),r("span",{className:"token punctuation"},")"),"\n","rdd",r("span",{className:"token punctuation"},"."),r("span",{className:"token builtin"},"sum"),r("span",{className:"token punctuation"},"("),r("span",{className:"token punctuation"},")")))),r("div",{className:"nb-output","data-prompt-number":3},r("pre",{className:"nb-text-output"},"45"))),r("div",{className:"nb-cell nb-markdown-cell"},r("p",null,"\u4f7f\u3044\u7d42\u308f\u3063\u305f\u3089\u505c\u6b62\u3057\u307e\u3059\u3002")),r("div",{className:"nb-cell nb-code-cell"},r("div",{className:"nb-input","data-prompt-number":4},r("pre",{className:"language-python"},r("code",{className:"language-python","data-language":"python"},"sc",r("span",{className:"token punctuation"},"."),"stop",r("span",{className:"token punctuation"},"("),r("span",{className:"token punctuation"},")"))))),r("div",{className:"nb-cell nb-markdown-cell"},r("h2",null,"\u304a\u308f\u308a\u306b"),r("p",null,"\u3053\u306e\u8a18\u4e8b\u3067\u306f Docker \u3092\u4f7f\u3063\u3066 pyspark \u74b0\u5883\u3092\u4f5c\u308a\u3001\u5b9f\u969b\u306b Spark \u30af\u30e9\u30b9\u30bf\u3092\u8d77\u52d5\u3057\u3066\u307f\u307e\u3057\u305f\u3002Spark \u306e\u3053\u3068\u306f\u307e\u3060\u307e\u3060\u5168\u7136\u5206\u304b\u308a\u307e\u305b\u3093\u304c\u5c11\u3057\u305a\u3064\u3067\u304d\u308b\u3053\u3068\u3092\u5897\u3084\u3057\u3066\u3044\u3053\u3046\u3068\u601d\u3044\u307e\u3059\u3002"),r("h2",null,"\u53c2\u8003"),r("ul",null,r("li",null,r("a",{href:"https://hub.docker.com/r/jupyter/pyspark-notebook/"},"jupyter/pyspark-notebook - Docker Hub")),r("li",null,r("a",{href:"https://jupyter-docker-stacks.readthedocs.io/en/latest/using/specifics.html#apache-spark"},"Image Specifics \u2014 docker-stacks latest documentation")),r("li",null,r("a",{href:"https://spark.apache.org/docs/latest/api/python/pyspark.html"},"pyspark package \u2014 PySpark 2.4.0 documentation")),r("li",null,r("a",{href:"https://blog.sicara.com/get-started-pyspark-jupyter-guide-tutorial-ae2fe84f594f"},"Get Started with PySpark and Jupyter Notebook in 3 Minutes")),r("li",null,r("a",{href:"https://jaceklaskowski.gitbooks.io/mastering-apache-spark/spark-local.html"},"Spark local (pseudo-cluster) \xb7 Mastering Apache Spark"))))))},m=o.a.createElement,u=function(a){var e=a.meta;return m(p.b,{meta:e},m(i,null))};u.getInitialProps=Object(l.a)(s.a.mark((function a(){var e,n;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e=t("n1xW"),n=e.entries,a.abrupt("return",{meta:n["blog/2019/01/hello-pyspark"]});case 2:case"end":return a.stop()}}),a)})));e.default=u},eesI:function(a,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/2019/01/hello-pyspark",function(){return t("aTI2")}])}},[["eesI",0,1,3,7,6,2,5,4]]]);