(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{394:function(a,e,n){__NEXT_REGISTER_PAGE("/blog/2019/08/ipynb-without-python",function(){return a.exports=n(403),{page:a.exports.default}})},403:function(a,e,n){"use strict";n.r(e);var t=n(3),c=n.n(t),s=n(1),o=n.n(s),p=n(5),r=n(0),m=n(12);function N(a){var e=a.id,n=a.text;return o.a.createElement("a",{href:"/".concat(e)},n||m.entries[e].title)}function u(){return(u=Object.assign||function(a){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(a[t]=n[t])}return a}).apply(this,arguments)}function l(a,e){if(null==a)return{};var n,t,c=function(a,e){if(null==a)return{};var n,t,c={},s=Object.keys(a);for(t=0;t<s.length;t++)n=s[t],e.indexOf(n)>=0||(c[n]=a[n]);return c}(a,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(t=0;t<s.length;t++)n=s[t],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(a,n)&&(c[n]=a[n])}return c}var b={},i="wrapper";function k(a){var e=a.components,n=l(a,["components"]);return Object(r.a)(i,u({},b,n,{components:e,mdxType:"MDXLayout"}),Object(r.a)("p",null,"これまで ipynb ファイルのレンダリングに Python が必要だったのを Node.js で完結するように変更しました。ほとんどブログを更新しないのに何の意味があるのかという気もしますが、めったに触らないからこそ開発環境は単純であるべきだろうと思います。"),Object(r.a)("p",null,"実装としては ",Object(r.a)("a",{href:"https://github.com/n6g7/ipynb-loader"},"ipynb-loader")," が内部で行っていたことを Python を使わずに Node.js だけでやる、というのが基本的な内容です。以前の実装については ",Object(r.a)(N,{id:"blog/2019/01/hello-ipynb",mdxType:"EntryLink"})," を参照してください。"),Object(r.a)("h2",null,"Node.js で ipynb ファイルを扱う"),Object(r.a)("p",null,"探したところ ",Object(r.a)("a",u({parentName:"p"},{href:"https://github.com/jsvine/notebookjs"}),"notebookjs")," が良さそうだったのでこれを使うことにしました。Jupyter はコードのシンタックスハイライトなどもやってくれますが、このパッケージはコールバックを提供するだけで自分ではそういう余計なことはせず、利用者が実装する必要があります。今回は MDX で既に使っている ",Object(r.a)("a",u({parentName:"p"},{href:"https://github.com/unifiedjs/unified"}),"unified")," を使うことにしました。"),Object(r.a)("p",null,"そんなこんなで以下のような Webpack Loader を書きました："),Object(r.a)("pre",{className:"language-js"},Object(r.a)("code",u({parentName:"pre"},{className:"language-js"}),Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," nb ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"notebookjs"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," unified ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"unified"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," rehypeKatex ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"rehype-katex"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," rehypeParse ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"rehype-parse"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," rehypePrism ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"@mapbox/rehype-prism"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," rehypeStringify ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"rehype-stringify"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," remarkGithub ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"remark-github"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," remarkMath ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"remark-math"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," remarkParse ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"remark-parse"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," remarkRehype ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"require"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"remark-rehype"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n\nnb",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method-variable function-variable method function property-access"}),"markdown")," ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"function"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token parameter"}),"markdown"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")")," ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token comment"}),"// Jupyter の Markdown cell を MDX と同じルールで変換する"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"return")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"unified"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"data"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"settings"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),",")," ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n      footnotes",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),":")," ",Object(r.a)("span",u({parentName:"code"},{className:"token boolean"}),"true"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"remarkParse",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"remarkMath",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"remarkGithub",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),",")," ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n      repository",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),":")," ",Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"dummy/repo"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),","),"\n      mentionStrong",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),":")," ",Object(r.a)("span",u({parentName:"code"},{className:"token boolean"}),"false"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),","),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"remarkRehype",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"rehypeKatex",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"rehypeStringify",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"processSync"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"markdown",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"toString"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n\nnb",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method-variable function-variable method function property-access"}),"highlighter")," ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"function"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token parameter"}),"text",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),",")," pre",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),",")," code",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),",")," lang"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")")," ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"if")," ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"code ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"!=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword null nil"}),"null"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")")," ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token comment"}),'// Prism のために class="language-python" 属性を付与する'),"\n    code",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token property-access"}),"className")," ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token template-string"}),Object(r.a)("span",u({parentName:"span"},{className:"token template-punctuation string"}),"`"),Object(r.a)("span",u({parentName:"span"},{className:"token string"}),"language-"),Object(r.a)("span",u({parentName:"span"},{className:"token interpolation"}),Object(r.a)("span",u({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"${"),"lang ",Object(r.a)("span",u({parentName:"span"},{className:"token operator"}),"||")," ",Object(r.a)("span",u({parentName:"span"},{className:"token string"}),'"text"'),Object(r.a)("span",u({parentName:"span"},{className:"token interpolation-punctuation punctuation"}),"}")),Object(r.a)("span",u({parentName:"span"},{className:"token template-punctuation string"}),"`")),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"return")," text\n",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n\nmodule",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method-variable function-variable method function property-access"}),"exports")," ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"function"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token parameter"}),"content"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")")," ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"const")," html ",Object(r.a)("span",u({parentName:"code"},{className:"token operator"}),"=")," nb",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"parse"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token known-class-name class-name"}),"JSON"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"parse"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"content",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"render"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token property-access"}),"outerHTML"),"\n\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token comment"}),"// notebookjs で生成した HTML に Prism を適用する"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"return")," ",Object(r.a)("span",u({parentName:"code"},{className:"token function"}),"unified"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"rehypeParse",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"rehypePrism",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"use"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"rehypeStringify",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"processSync"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),"html",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"."),Object(r.a)("span",u({parentName:"code"},{className:"token method function property-access"}),"toString"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"("),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),")"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(r.a)("p",null,"このブログでしか使えないので NPM パッケージにしたりはしていません。"),Object(r.a)("h2",null,"CSS"),Object(r.a)("p",null,"notebookjs が生成する HTML は Jupyter のものとは結構構造が異なっています。移行作業は若干面倒でしたが、正直いって Jupyter の HTML 構造はぐちゃぐちゃなので、書き始めたらこれはこれで良かったという感じがしてきました。"),Object(r.a)("p",null,"Jupyter といえば Input / Output の対応付があります。本家の HTML では ",Object(r.a)("inlineCode",{parentName:"p"},"In [1]:")," \b という文字列が直接出力されますが、 notebookjs では代わりに ",Object(r.a)("inlineCode",{parentName:"p"},"data-prompt-number")," 属性を持った HTML が出力されます："),Object(r.a)("pre",{className:"language-html"},Object(r.a)("code",u({parentName:"pre"},{className:"language-html"}),Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"<"),"div")," ",Object(r.a)("span",u({parentName:"span"},{className:"token attr-name"}),"class"),Object(r.a)("span",u({parentName:"span"},{className:"token attr-value"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"="),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"'),"nb-cell nb-code-cell",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"')),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"<"),"div")," ",Object(r.a)("span",u({parentName:"span"},{className:"token attr-name"}),"class"),Object(r.a)("span",u({parentName:"span"},{className:"token attr-value"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"="),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"'),"nb-input",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"'))," ",Object(r.a)("span",u({parentName:"span"},{className:"token attr-name"}),"data-prompt-number"),Object(r.a)("span",u({parentName:"span"},{className:"token attr-value"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"="),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"'),"1",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"')),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"<"),"pre"),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"...",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"</"),"pre"),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"</"),"div"),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"<"),"div")," ",Object(r.a)("span",u({parentName:"span"},{className:"token attr-name"}),"class"),Object(r.a)("span",u({parentName:"span"},{className:"token attr-value"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"="),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"'),"nb-output",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"'))," ",Object(r.a)("span",u({parentName:"span"},{className:"token attr-name"}),"data-prompt-number"),Object(r.a)("span",u({parentName:"span"},{className:"token attr-value"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"="),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"'),"1",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"')),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"<"),"pre")," ",Object(r.a)("span",u({parentName:"span"},{className:"token attr-name"}),"class"),Object(r.a)("span",u({parentName:"span"},{className:"token attr-value"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"="),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"'),"nb-text-output",Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),'"')),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"...",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"</"),"pre"),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"</"),"div"),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token tag"}),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),"</"),"div"),Object(r.a)("span",u({parentName:"span"},{className:"token punctuation"}),">")),"\n")),Object(r.a)("p",null,"これに対応して ",Object(r.a)("inlineCode",{parentName:"p"},"In [1]:")," を出力するために SCSS の for ループで ",Object(r.a)("inlineCode",{parentName:"p"},"data-prompt-number")," に対応するルールを現実的な範囲で全部出力するようにしました。無駄な CSS ルールは多くなりますが、許容範囲だと思います。"),Object(r.a)("pre",{className:"language-scss"},Object(r.a)("code",u({parentName:"pre"},{className:"language-scss"}),Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"@for")," ",Object(r.a)("span",u({parentName:"code"},{className:"token variable"}),"$i")," ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"from")," ",Object(r.a)("span",u({parentName:"code"},{className:"token number"}),"1")," ",Object(r.a)("span",u({parentName:"code"},{className:"token keyword"}),"through")," ",Object(r.a)("span",u({parentName:"code"},{className:"token selector"}),"100 "),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token selector"}),'.nb-input[data-prompt-number="',Object(r.a)("span",u({parentName:"span"},{className:"token variable"}),"#{$i}"),'"] '),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token selector"}),Object(r.a)("span",u({parentName:"span"},{className:"token parent important"}),"&"),"::before "),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(r.a)("span",u({parentName:"code"},{className:"token property"}),"content"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),":")," ",Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"In [#{$i}]:"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token selector"}),'.nb-output[data-prompt-number="',Object(r.a)("span",u({parentName:"span"},{className:"token variable"}),"#{$i}"),'"] '),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token selector"}),Object(r.a)("span",u({parentName:"span"},{className:"token parent important"}),"&"),"::before "),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(r.a)("span",u({parentName:"code"},{className:"token property"}),"content"),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),":")," ",Object(r.a)("span",u({parentName:"code"},{className:"token string"}),'"Out [#{$i}]:"'),Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),";"),"\n    ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(r.a)("span",u({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(r.a)("h2",null,"おわりに"),Object(r.a)("p",null,"ブログ開発しても肝心の記事を書かないのでは無意味なので、もっと書いていきたいですね。"),Object(r.a)("h2",null,"参考"),Object(r.a)("ul",null,Object(r.a)("li",{parentName:"ul"},Object(r.a)("a",u({parentName:"li"},{href:"https://github.com/yuku/yuku.github.io/issues/1"}),"yuku/yuku.github.io#1"),": Remove Python from dependencies and use Node.js 12")))}function j(a){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function O(a,e,n,t,c,s,o){try{var p=a[s](o),r=p.value}catch(a){return void n(a)}p.done?e(r):Promise.resolve(r).then(t,c)}function d(a,e){for(var n=0;n<e.length;n++){var t=e[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(a,t.key,t)}}function y(a,e){return!e||"object"!==j(e)&&"function"!=typeof e?function(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}(a):e}function f(a){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function h(a,e){return(h=Object.setPrototypeOf||function(a,e){return a.__proto__=e,a})(a,e)}k.isMDXComponent=!0,n.d(e,"default",function(){return g});var g=function(a){function e(){return function(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),y(this,f(e).apply(this,arguments))}var t,s,r;return function(a,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),e&&h(a,e)}(e,o.a.Component),t=e,s=[{key:"render",value:function(){return o.a.createElement(p.a,{meta:this.props.meta},o.a.createElement(k,null))}}],r=[{key:"getInitialProps",value:function(){var a,e=(a=c.a.mark(function a(){var e,t;return c.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e=n(12),t=e.entries,a.abrupt("return",{meta:t["blog/2019/08/ipynb-without-python"]});case 2:case"end":return a.stop()}},a)}),function(){var e=this,n=arguments;return new Promise(function(t,c){var s=a.apply(e,n);function o(a){O(s,t,c,o,p,"next",a)}function p(a){O(s,t,c,o,p,"throw",a)}o(void 0)})});return function(){return e.apply(this,arguments)}}()}],s&&d(t.prototype,s),r&&d(t,r),e}()}},[[394,1,0,2]]]);