(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{"HaE+":function(e,t,a){"use strict";function n(e,t,a,n,o,s,i){try{var l=e[s](i),r=l.value}catch(c){return void a(c)}l.done?t(r):Promise.resolve(r).then(n,o)}function o(e){return function(){var t=this,a=arguments;return new Promise((function(o,s){var i=e.apply(t,a);function l(e){n(i,o,s,l,r,"next",e)}function r(e){n(i,o,s,l,r,"throw",e)}l(void 0)}))}}a.d(t,"a",(function(){return o}))},NPAK:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/blog/2019/01/hello-ipynb",function(){return a("pmiQ")}])},Yp5c:function(e,t,a){"use strict";a.d(t,"a",(function(){return v})),a.d(t,"b",(function(){return T}));var n=a("q1tI"),o=a.n(n),s=a("8Kt/"),i=a.n(s),l=a("YFqc"),r=a.n(l),c=a("nOHt"),p=a("TSYQ"),m=a.n(p),u=a("wd/R"),d=a.n(u),h=a("IP2g"),b=a("he5r"),f=o.a.createElement,g=function(e){return f("aside",{className:m()("widget mb-4",e.className)},f("h1",{className:"title font-weight-bold"},e.title),e.children)},y=o.a.createElement,k=function(e){return e||"https://yuku.takahashi.coffee".concat(b.a)},N=Object(c.withRouter)((function(e){return y("div",{className:"blogpage container"},y(i.a,null,y("title",null,e.meta.title," - ",b.c),y("meta",{name:"description",content:e.meta.description}),y("meta",{name:"twitter:card",content:"summary"}),y("meta",{name:"twitter:creator",content:"@yuku_t"}),y("meta",{property:"fb:app_id",content:b.b}),y("meta",{property:"og:title",content:"".concat(e.meta.title," - ").concat(b.c)}),y("meta",{property:"og:type",content:"article"}),y("meta",{property:"og:url",content:"https://yuku.takahashi.coffee".concat(e.router.pathname)}),y("meta",{property:"og:image",content:k()}),y("meta",{property:"og:description",content:e.meta.description}),y("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/prism/1.15.0/themes/prism.min.css"}),y("link",{rel:"stylesheet",href:"https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css"})),y("div",{className:"row"},y("main",{className:m()("col-xl-8",e.className)},y("article",{itemScope:!0,itemType:"http://schema.org/BlogPosting"},y("meta",{itemProp:"author",content:"Yuku Takahashi"}),y("meta",{itemProp:"datePublished",content:e.meta.publishedAt}),e.meta.modifiedAt&&y("meta",{itemProp:"dateModified",content:e.meta.modifiedAt}),y("meta",{itemProp:"image",content:k()}),y("header",{className:"mb-4 header"},y("h1",{className:"headline",itemProp:"headline"},e.meta.title),y("ul",{className:"list-inline text-dark font-weight-light"},y("li",{className:"list-inline-item"},y("span",{className:"ml-1"},d()(e.meta.publishedAt).format("YYYY-MM-DD HH:mm"))),y("li",{className:"list-inline-item"},e.meta.tags.map((function(e,t){return[t>0?",":null,y("span",{key:t,className:"ml-1"},"#",e)]}))))),y("section",{className:"mb-4 body",itemProp:"articleBody"},e.children))),y("div",{className:"col-xl-4"},y("div",{className:"pl-xl-2"},y(g,{title:"About Me"},y("div",null,y("img",{src:b.a,alt:"avatar",className:"avatar rounded-circle mb-4 mx-auto d-block"}),y("p",null,"Software Engineer at FLYWHEEL. Working mainly on recommendation systems in these days. Ex-Qiita CTO.",y(r.a,{href:"/about"},y("a",{href:"/about",style:{marginLeft:"4px"}},"Read more")),"."))),y(g,{title:"Follow"},y("ul",{className:"list-inline icons"},y("li",{className:"list-inline-item"},y("a",{href:"https://twitter.com/yuku_t"},y("span",{className:"fa-stack fa-lg"},y(h.a,{icon:"circle",className:"fa-stack-2x"}),y(h.a,{icon:["fab","twitter"],inverse:!0,className:"fa-stack-1x"})))),y("li",{className:"list-inline-item"},y("a",{href:"https://github.com/yuku"},y("span",{className:"fa-stack fa-lg"},y(h.a,{icon:"circle",className:"fa-stack-2x"}),y(h.a,{icon:["fab","github"],inverse:!0,className:"fa-stack-1x"})))),y("li",{className:"list-inline-item"},y("a",{href:"/static/rss-feed.xml"},y("span",{className:"fa-stack fa-lg"},y(h.a,{icon:"circle",className:"fa-stack-2x"}),y(h.a,{icon:"rss",inverse:!0,className:"fa-stack-1x"}))))))))))})),w=o.a.createElement,v=function(e){var t=e.meta,a=e.children;return Object(n.useEffect)((function(){if(t.loadTwitterWidget){var e=document.createElement("script");e.async=!0,e.src="https://platform.twitter.com/widgets.js",e.charset="utf-8",document.body.appendChild(e)}}),[]),w(N,{className:"mdx",meta:t},a)},x=o.a.createElement,T=function(e){return x(N,{className:"notebook",meta:e.meta},e.children)}},n1xW:function(e,t,a){"use strict";a.r(t),a.d(t,"entries",(function(){return n}));var n={"blog/2020/07/connect-to-a-resource-behind-a-k9s-cluster-from-local-machine":{title:"Connect to a Resource Behind a k8s Cluster From Local Machine",description:"Sometimes, especially in production environment, resources such as databases are only accessable from a k8s cluster for security purposes and cannot be accessed directly from your local machine. In this case, if you want to access the resource from your local machine, you need to create a tunnel service in the cluster. This blog post explains how to create a such service.",format:"mdx",publishedAt:"2020-07-25T22:42:00+09:00",tags:["k8s"]},"blog/2020/01/poisson-generalized-linear-model":{description:"\u67b6\u7a7a\u690d\u7269\u306e\u30c7\u30fc\u30bf\u3092\u4e00\u822c\u5316\u7dda\u5f62\u30e2\u30c7\u30eb\u3067\u3042\u308b\u30dd\u30a2\u30bd\u30f3\u56de\u5e30\u3092\u7528\u3044\u3066\u30e2\u30c7\u30ea\u30f3\u30b0\u3059\u308b\u3002",format:"ipynb",publishedAt:"2020-01-18T10:54:00+09:00",modifiedAt:"2020-01-18T11:25:00+09:00",tags:["julia"],title:"\u4e00\u822c\u5316\u7dda\u5f62\u30e2\u30c7\u30eb - \u30dd\u30a2\u30bd\u30f3\u56de\u5e30"},"blog/2020/01/maximum-likelihood-estimation-of-probability-distribution-and-statistical-model":{description:"\u67b6\u7a7a\u306e\u690d\u7269\u306e\u96c6\u56e3\u3092\u8abf\u67fb\u3057\u3066\u5f97\u3089\u308c\u305f\u30c7\u30fc\u30bf\u3092\u8aac\u660e\u3059\u308b\u305f\u3081\u306b\u30dd\u30a2\u30bd\u30f3\u5206\u5e03\u3092\u3042\u3066\u306f\u3081\u3001\u6700\u5c24\u63a8\u5b9a\u3092\u7528\u3044\u3066\u30d1\u30e9\u30e1\u30fc\u30bf\u306e\u63a8\u5b9a\u3092\u884c\u3046\u3002",format:"ipynb",publishedAt:"2020-01-13T00:52:00+09:00",tags:["julia"],title:"\u78ba\u7387\u5206\u5e03\u3068\u7d71\u8a08\u30e2\u30c7\u30eb\u306e\u6700\u5c24\u63a8\u5b9a"},"blog/2020/01/als-for-matrix-factorization":{description:"\u5354\u8abf\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u3067\u5e83\u304f\u4f7f\u308f\u308c\u308b MF \u306e\u5b9f\u88c5\u306e\u4e00\u3064\u3067\u3042\u308b ALS \u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u6570\u5b66\u7684\u306a\u80cc\u666f\u3092\u78ba\u8a8d\u3057\u3001 Julia \u3092\u4f7f\u3063\u3066\u5b9f\u88c5\u3059\u308b\u3002",format:"ipynb",publishedAt:"2020-01-06T10:09:00+09:00",modifiedAt:"2020-01-06T10:33:00+09:00",tags:["julia"],title:"Matrix Factorization \u306e\u305f\u3081\u306e ALS \u30a2\u30eb\u30b4\u30ea\u30ba\u30e0\u306e\u6570\u7406\u3068\u5b9f\u88c5"},"blog/2019/10/github-actions":{description:"\u30d6\u30ed\u30b0\u306e CI/CD \u3092 CircleCI \u304b\u3089 GitHub Actions \u306b\u79fb\u884c\u3057\u3066\u307f\u3066\u306e\u6240\u611f\u306a\u3069\u3002",format:"mdx",publishedAt:"2019-10-13T23:57:00+09:00",tags:["Blog dev"],title:"GitHub Actions \u306b\u79fb\u884c\u3057\u305f"},"blog/2019/08/rss-feed":{description:"\u30d6\u30ed\u30b0\u306b RSS \u30d5\u30a3\u30fc\u30c9\u3092\u5b9f\u88c5\u3057\u307e\u3057\u305f\u3002",format:"mdx",publishedAt:"2019-08-30T19:10:00+09:00",tags:["Blog dev"],title:"RSS \u30d5\u30a3\u30fc\u30c9\u3092\u5b9f\u88c5\u3057\u305f"},"blog/2019/08/ipynb-without-python":{description:"Python \u3092\u4f7f\u308f\u305a\u306b Jupyter Notebook \u5f62\u5f0f\u3092\u30b5\u30dd\u30fc\u30c8\u3057\u307e\u3057\u305f\u3002",format:"mdx",publishedAt:"2019-08-18T19:10:00+09:00",tags:["Blog dev"],title:"\u30d6\u30ed\u30b0\u306e\u30d3\u30eb\u30c9\u74b0\u5883\u304b\u3089 Python \u3092\u6392\u9664\u3057\u305f"},"blog/2019/06/why-i-joined-flywheel":{description:"\u4f55\u3092\u9b45\u529b\u306b\u611f\u3058\u3066 FLYWHEEL \u306b\u5165\u793e\u3057\u3088\u3046\u3068\u6c7a\u3081\u305f\u306e\u304b\u306e\u8a18\u9332\u3067\u3059\u3002",format:"mdx",modifiedAt:"2019-06-18T09:52:00+09:00",publishedAt:"2019-06-17T22:28:00+09:00",tags:["essay"],title:"\u306a\u305c FLYWHEEL \u306b\u5165\u793e\u3057\u305f\u306e\u304b"},"blog/2019/04/pyspark-ml-vs-mllib":{description:"",format:"mdx",publishedAt:"2019-04-22T00:04:00+09:00",tags:["pyspark"],title:"pyspark.ml \u3068 pyspark.mllib \u306e\u3069\u3061\u3089\u3092\u4f7f\u3046\u3079\u304d\u304b"},"blog/2019/01/authorize-iap-by-nodejs":{description:"Cloud IAP \u3067\u4fdd\u8b77\u3055\u308c\u305f\u30ea\u30bd\u30fc\u30b9\u306b\u5bfe\u3057 google-auth-library \u3092\u4f7f\u3063\u3066 Node.js \u3067\u8a8d\u8a3c\u3057\u30a2\u30af\u30bb\u30b9\u3059\u308b\u65b9\u6cd5\u3092\u89e3\u8aac\u3057\u307e\u3059\u3002",format:"mdx",publishedAt:"2019-01-28T14:54:00+09:00",tags:["GCP"],title:"Node.js \u304b\u3089 Cloud IAP \u3067\u4fdd\u8b77\u3055\u308c\u305f\u30ea\u30bd\u30fc\u30b9\u3092\u8a8d\u8a3c\u3059\u308b"},"blog/2019/01/grpc-proxy-for-grpc-web":{description:"In order for gRPC to communicate with gRPC-Web, you need to set up a proxy, such as Envoy. This article describes why gRPC-Web needs a proxy.",format:"mdx",loadTwitterWidget:!0,modifiedAt:"2019-01-25T23:26:00+09:00",publishedAt:"2019-01-25T22:30:00+09:00",tags:["gRPC"],title:"Why gRPC-Web Needs Proxy"},"blog/2019/01/deploy-app-engine-from-circleci":{description:"How to deploy ann app running on AppEngine Node.js standard environment using CircleCI",format:"mdx",modifiedAt:"2019-01-20T09:33:00+09:00",publishedAt:"2019-01-18T14:00:00+09:00",tags:["GCP"],title:"Deploy AppEngine Apps Using CircleCI"},"blog/2019/01/google-cloud-sdk-in-docker":{description:"This article explains how to install and use the Google Cloud SDK in Docker rather than on the local machine.",format:"mdx",modifiedAt:"2020-05-30T09:21:13+09:00",publishedAt:"2019-01-17T14:43:00+09:00",tags:["GCP"],title:"How to Use Google Cloud SDK Using Docker"},"blog/2019/01/hello-pyspark":{description:"An introduction to pyspark using the Docker image environment provided by Jupyter Lab.",format:"ipynb",modifiedAt:"2020-05-30T08:34:49+09:00",publishedAt:"2019-01-16T20:50:00+09:00",tags:["pyspark"],title:"Getting Started With Pyspark Using Docker"},"blog/2019/01/hello-ipynb":{description:"Jupyter Notebook can now be displayed on this blog. I'm going to use it to publish my study records of machine learning and data analysis. This article describes the details of the implementation.",format:"ipynb",modifiedAt:"2020-05-30T00:43:29+09:00",publishedAt:"2019-01-15T20:17:00+09:00",tags:["Blog dev"],title:"Display Jupyter Notebook on Next.js"},"blog/2019/01/twitter-card-and-ogp":{description:"Twitter Card and Open Graph Protocol are now supported on the blog.",format:"mdx",loadTwitterWidget:!0,modifiedAt:"2020-05-29T23:41:46+09:00",publishedAt:"2019-01-07T22:40:00+09:00",tags:["Blog dev"],title:"Twitter Card and OGP Support"},"blog/2019/01/hello-new-blog":{description:"It's 2019 and I've created a new blog of my own. I will explain the motivation and the background of the selection of the tools I used.",format:"mdx",modifiedAt:"2020-05-24T16:15:21+09:00",ogImage:"https://yuku.takahashi.coffee/static/images/2019/01/next-vs-gatsby.png",publishedAt:"2019-01-05T13:52:00+09:00",tags:["Blog dev"],title:"Background on Blog Homebrewing and Tool Selection in 2019"}}},pmiQ:function(e,t,a){"use strict";a.r(t);var n=a("o0o1"),o=a.n(n),s=a("HaE+"),i=a("q1tI"),l=a.n(i),r=a("Yp5c"),c=l.a.createElement,p=function(){return c("div",{className:"nb-notebook"},c("div",{className:"nb-worksheet"},c("div",{className:"nb-cell nb-markdown-cell"},c("p",null,"Commit: ",c("a",{href:"https://github.com/yuku/yuku.github.io/commit/1c18e263dcc3ca54c0061ccda57b4bca8ba9f9fd"},"yuku/yuku.github.io@",c("code",null,"1c18e26"))),c("p",null,"Jupyter Notebook can now be displayed on this blog. I'm going to use it to publish my study records of machine learning and data analysis. \ud83d\udcaa\ud83c\udffc")),c("div",{className:"nb-cell nb-code-cell"},c("div",{className:"nb-input","data-prompt-number":1},c("pre",{className:"language-python"},c("code",{className:"language-python","data-language":"python"},c("span",{className:"token keyword"},"print"),c("span",{className:"token punctuation"},"("),c("span",{className:"token string"},'"Hello world"'),c("span",{className:"token punctuation"},")")))),c("div",{className:"nb-output","data-prompt-number":1},c("pre",{className:"nb-stdout"},"Hello world","\n"))),c("div",{className:"nb-cell nb-markdown-cell"},c("p",null,"This article describes the details of the implementation."),c("h2",null,"Display ipynb files on Next.js"),c("p",null,"In order to display ipynb files on Next.js, I needed to do two things:"),c("ol",null,c("li",null,"Make a ipynb file readable by Webpack."),c("li",null,"Convert a loaded ipynb file into a React Component.")),c("h3",null,"Make ipynb files readable"),c("p",null,"Next.js uses Webpack for file resolution, so you can use ",c("a",{href:"https://www.npmjs.com/package/ipynb-loader"},"ipynb-loader"),". This loader does nothing more than call ",c("a",{href:"https://github.com/jupyter/nbconvert"},"jupyter/nbconvert")," internally and return the result. jupyter/nbconvter provides the ability to convert ipynb files to HTML, Markdown, etc."),c("p",null,"When using jupyter/nbconvert, I had to decide whether to output as HTML or Markdown"),c("p",null,"If outputting in HTML, I can easily display the characteristic ",c("code",null,"In [1]")," prompt of Jupyter Notebook, but on the other hand, it is difficult to use some desired features such as LaTex notation. ",c("sup",{id:"fnref-1"},c("a",{href:"#fn-1",className:"footnote-ref"},"1"))),c("p",null,"When outputting as Markdown, not only I can use the same processing as MDX, but I can also use Markdown notation that Jupyter Notebook does not support, which is an advantage. On the other hand, the correspondence between input and output is lost, so it doesn't feel like a Jupyter Notebook is displayed."),c("p",null,"After all, when I want to write a blog in ipynb format, I want to express the correspondence between input and output, and if I want to use LaTex, for example, I can write in MDX format, so I decided to output in HTML."),c("h3",null,"Convert to a React Component"),c("p",null,"Next.js expects to import a React Component. This means that Webpack needs to generate a string that can be interpreted as a React Component."),c("p",null,"JSX is useful for writing a React Component. Unfortunately, I couldn't find a Webpack loader that would accomplish this goal, so I implemented such loader by myself using ",c("a",{href:"https://www.npmjs.com/package/htmltojsx"},"htmltojsx"),", which is written by Facebook:"),c("pre",{className:"language-javascript"},c("code",{className:"language-javascript"},c("span",{className:"token keyword"},"const")," ",c("span",{className:"token maybe-class-name"},"HTMLtoJSX")," ",c("span",{className:"token operator"},"=")," ",c("span",{className:"token function"},"require"),c("span",{className:"token punctuation"},"("),c("span",{className:"token string"},'"htmltojsx"'),c("span",{className:"token punctuation"},")"),"\n",c("span",{className:"token keyword"},"const")," converter ",c("span",{className:"token operator"},"=")," ",c("span",{className:"token keyword"},"new")," ",c("span",{className:"token class-name"},"HTMLtoJSX"),c("span",{className:"token punctuation"},"("),c("span",{className:"token punctuation"},"{")," createClass",c("span",{className:"token operator"},":")," ",c("span",{className:"token boolean"},"false")," ",c("span",{className:"token punctuation"},"}"),c("span",{className:"token punctuation"},")"),"\n","\n","module",c("span",{className:"token punctuation"},"."),c("span",{className:"token method-variable function-variable method function property-access"},"exports")," ",c("span",{className:"token operator"},"=")," ",c("span",{className:"token keyword"},"function")," ",c("span",{className:"token punctuation"},"("),c("span",{className:"token parameter"},"content"),c("span",{className:"token punctuation"},")")," ",c("span",{className:"token punctuation"},"{"),"\n","  ",c("span",{className:"token comment"},"// The `content` argument is the HTML returned by ipynb-loader."),"\n","  ",c("span",{className:"token keyword"},"return")," ",c("span",{className:"token template-string"},c("span",{className:"token template-punctuation string"},"`"),c("span",{className:"token string"},"\n","  ",'import React from "react"',"\n","  ","export default () => "),c("span",{className:"token interpolation"},c("span",{className:"token interpolation-punctuation punctuation"},"$","{"),"converter",c("span",{className:"token punctuation"},"."),c("span",{className:"token method function property-access"},"convert"),c("span",{className:"token punctuation"},"("),"content",c("span",{className:"token punctuation"},")"),c("span",{className:"token interpolation-punctuation punctuation"},"}")),c("span",{className:"token string"},"\n","  "),c("span",{className:"token template-punctuation string"},"`")),"\n",c("span",{className:"token punctuation"},"}"),"\n")),c("h2",null,"Notes"),c("ul",null,c("li",null,"I've been generated entries.ts file, which is a collection of metadata written in MDX files during compilation, but ipynb doesn't support such metadata, so I gave up on automatically generating the file and decided to manage it manually."),c("li",null,"Using jupyter/nbconvert to generate HTML from ipynb made the Blog's architecture complex, and I had to switch from Travis CI to CircleCI to maintain auto-deployment. Since ipynb is a JSON, it may be good to reimplement it with JavaScript. In that case, it seems that the part that converts Markdown to HTML can be shared with MDX.")),c("h2",null,"Conclusion"),c("p",null,"In my next job, I'm going to use pyspark to analyze data, so I'd like to use this feature to publish the knowledge I've gained while leaning pyspark and using it."),c("p",null,"This is the first time I've written a webpack loader, and it's easier than I thought it would be. Through this implementation, I have learned Webpack itself well. If you feel that you don't know what Webpack is doing, you may be able to understand Webpack better by writing a loader."),c("div",{className:"footnotes"},c("hr",null),c("ol",null,c("li",{id:"fn-1"},"Jupyter Notebook implements LaTex notation using MathJax, but in this blog, I try not to run JS on the browser as much as possible, so I use ",c("a",{href:"https://www.npmjs.com/package/remark-math"},"remark-math")," and ",c("a",{href:"https://www.npmjs.com/package/rehype-katex"},"rehype-katex")," to convert LaTex notation to HTML at compile time.",c("a",{href:"#fnref-1",className:"footnote-backref"},"\u21a9")))))))},m=l.a.createElement,u=function(e){var t=e.meta;return m(r.b,{meta:t},m(p,null))};u.getInitialProps=Object(s.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a("n1xW"),n=t.entries,e.abrupt("return",{meta:n["blog/2019/01/hello-ipynb"]});case 2:case"end":return e.stop()}}),e)})));t.default=u}},[["NPAK",0,1,3,2,4,5]]]);